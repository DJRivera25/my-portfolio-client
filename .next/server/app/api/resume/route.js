(()=>{var e={};e.id=311,e.ids=[311],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},7462:(e,t,r)=>{"use strict";r.d(t,{A:()=>i});var s=r(56037),a=r.n(s);let o=process.env.MONGODB_URI;if(!o)throw Error("Please define the MONGODB_URI environment variable inside .env.local");let n=global.mongoose;n||(n=global.mongoose={conn:null,promise:null});let i=async function(){return n.conn||(n.promise||(n.promise=a().connect(o,{bufferCommands:!1}).then(e=>e)),n.conn=await n.promise),n.conn}},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},11723:e=>{"use strict";e.exports=require("querystring")},16804:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});var s=r(71870);s.v2.config({cloud_name:process.env.CLOUDINARY_CLOUD_NAME,api_key:process.env.CLOUDINARY_API_KEY,api_secret:process.env.CLOUDINARY_API_SECRET});let a=s.v2},27732:(e,t,r)=>{"use strict";r.r(t),r.d(t,{patchFetch:()=>v,routeModule:()=>x,serverHooks:()=>R,workAsyncStorage:()=>g,workUnitAsyncStorage:()=>w});var s={};r.r(s),r.d(s,{DELETE:()=>f,POST:()=>c,PUT:()=>m,runtime:()=>l});var a=r(96559),o=r(48088),n=r(37719),i=r(32190),u=r(7462),p=r(56570),d=r(16804);let l="nodejs";async function c(e){if(await (0,u.A)(),!(e.headers.get("content-type")||"").startsWith("multipart/form-data"))return i.NextResponse.json({message:"Invalid content type"},{status:400});let t=(await e.formData()).get("resume");if(!t||"string"==typeof t)return i.NextResponse.json({message:"Resume file is required"},{status:400});let r=await t.arrayBuffer(),s=Buffer.from(r),a=await new Promise((e,t)=>{d.A.uploader.upload_stream({folder:"resumes",resource_type:"raw",format:"pdf",public_id:"Derem-Joshua-Rivera-Resume.pdf",allowed_formats:["pdf"]},(r,s)=>{r?t(r):e(s)}).end(s)}),o=await p.A.create({url:a.secure_url});return i.NextResponse.json(o,{status:201})}async function m(e){if(await (0,u.A)(),!(e.headers.get("content-type")||"").startsWith("multipart/form-data"))return i.NextResponse.json({message:"Invalid content type"},{status:400});let t=await e.formData(),r=t.get("id"),s=t.get("resume");if(!r)return i.NextResponse.json({message:"ID is required"},{status:400});let a=await p.A.findById(r);if(!a)return i.NextResponse.json({message:"Resume not found"},{status:404});if(s&&"string"!=typeof s){let e=await s.arrayBuffer(),t=Buffer.from(e);a.url=(await new Promise((e,r)=>{d.A.uploader.upload_stream({folder:"resumes",resource_type:"raw",format:"pdf",public_id:"Derem-Joshua-Rivera-Resume.pdf",allowed_formats:["pdf"]},(t,s)=>{t?r(t):e(s)}).end(t)})).secure_url}let o=await a.save();return i.NextResponse.json(o)}async function f(e){await (0,u.A)();let{id:t}=await e.json();return await p.A.findByIdAndDelete(t)?i.NextResponse.json({message:"Resume deleted successfully"}):i.NextResponse.json({message:"Resume not found"},{status:404})}let x=new a.AppRouteRouteModule({definition:{kind:o.RouteKind.APP_ROUTE,page:"/api/resume/route",pathname:"/api/resume",filename:"route",bundlePath:"app/api/resume/route"},resolvedPagePath:"C:\\Users\\stephanie\\Documents\\B550 MCP MERN\\WebPortfolio\\my-portfolio-client\\app\\api\\resume\\route.ts",nextConfigOutput:"",userland:s}),{workAsyncStorage:g,workUnitAsyncStorage:w,serverHooks:R}=x;function v(){return(0,n.patchFetch)({workAsyncStorage:g,workUnitAsyncStorage:w})}},27910:e=>{"use strict";e.exports=require("stream")},29021:e=>{"use strict";e.exports=require("fs")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},44870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},55511:e=>{"use strict";e.exports=require("crypto")},55591:e=>{"use strict";e.exports=require("https")},56037:e=>{"use strict";e.exports=require("mongoose")},56570:(e,t,r)=>{"use strict";r.d(t,{A:()=>o});var s=r(56037);let a=new s.Schema({url:{type:String,required:!0},fileUrl:{type:String},uploadedAt:{type:Date,default:Date.now}},{timestamps:!0}),o=s.models.Resume||(0,s.model)("Resume",a)},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},78335:()=>{},79551:e=>{"use strict";e.exports=require("url")},81630:e=>{"use strict";e.exports=require("http")},96487:()=>{}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[447,580,870],()=>r(27732));module.exports=s})();