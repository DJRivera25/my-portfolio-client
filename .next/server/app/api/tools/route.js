(()=>{var e={};e.id=839,e.ids=[839],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},7462:(e,t,r)=>{"use strict";r.d(t,{A:()=>i});var s=r(56037),o=r.n(s);let n=process.env.MONGODB_URI;if(!n)throw Error("Please define the MONGODB_URI environment variable inside .env.local");let a=global.mongoose;a||(a=global.mongoose={conn:null,promise:null});let i=async function(){return a.conn||(a.promise||(a.promise=o().connect(n,{bufferCommands:!1}).then(e=>e)),a.conn=await a.promise),a.conn}},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},11723:e=>{"use strict";e.exports=require("querystring")},16804:(e,t,r)=>{"use strict";r.d(t,{A:()=>o});var s=r(71870);s.v2.config({cloud_name:process.env.CLOUDINARY_CLOUD_NAME,api_key:process.env.CLOUDINARY_API_KEY,api_secret:process.env.CLOUDINARY_API_SECRET});let o=s.v2},27910:e=>{"use strict";e.exports=require("stream")},29021:e=>{"use strict";e.exports=require("fs")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},38539:(e,t,r)=>{"use strict";r.r(t),r.d(t,{patchFetch:()=>A,routeModule:()=>x,serverHooks:()=>v,workAsyncStorage:()=>y,workUnitAsyncStorage:()=>w});var s={};r.r(s),r.d(s,{DELETE:()=>f,GET:()=>d,POST:()=>m,PUT:()=>g,runtime:()=>l});var o=r(96559),n=r(48088),a=r(37719),i=r(32190),u=r(7462),p=r(61275),c=r(16804);let l="nodejs";async function d(){await (0,u.A)();let e=await p.A.find();return i.NextResponse.json(e)}async function m(e){if(await (0,u.A)(),!(e.headers.get("content-type")||"").startsWith("multipart/form-data"))return i.NextResponse.json({message:"Invalid content type"},{status:400});let t=await e.formData(),r=t.get("name"),s=t.get("category"),o=t.get("icon");if(!r||!s||!o||"string"==typeof o)return i.NextResponse.json({message:"All fields including icon are required"},{status:400});let n=await o.arrayBuffer(),a=Buffer.from(n),l=await new Promise((e,t)=>{c.A.uploader.upload_stream({folder:"tools",resource_type:"image",allowed_formats:["jpg","jpeg","png","webp"]},(r,s)=>{r?t(r):e(s)}).end(a)}),d=await p.A.create({name:String(r),category:String(s),icon:l.secure_url});return i.NextResponse.json(d,{status:201})}async function g(e){if(await (0,u.A)(),!(e.headers.get("content-type")||"").startsWith("multipart/form-data"))return i.NextResponse.json({message:"Invalid content type"},{status:400});let t=await e.formData(),r=t.get("id"),s=t.get("name"),o=t.get("category"),n=t.get("icon");if(!r)return i.NextResponse.json({message:"ID is required"},{status:400});let a=await p.A.findById(r);if(!a)return i.NextResponse.json({message:"Tool not found"},{status:404});if(s&&(a.name=String(s)),o&&(a.category=String(o)),n&&"string"!=typeof n){let e=await n.arrayBuffer(),t=Buffer.from(e);a.icon=(await new Promise((e,r)=>{c.A.uploader.upload_stream({folder:"tools",resource_type:"image",allowed_formats:["jpg","jpeg","png","webp"]},(t,s)=>{t?r(t):e(s)}).end(t)})).secure_url}let l=await a.save();return i.NextResponse.json(l)}async function f(e){await (0,u.A)();let{id:t}=await e.json();return await p.A.findByIdAndDelete(t)?i.NextResponse.json({message:"Tool deleted successfully"}):i.NextResponse.json({message:"Tool not found"},{status:404})}let x=new o.AppRouteRouteModule({definition:{kind:n.RouteKind.APP_ROUTE,page:"/api/tools/route",pathname:"/api/tools",filename:"route",bundlePath:"app/api/tools/route"},resolvedPagePath:"C:\\Users\\stephanie\\Documents\\B550 MCP MERN\\WebPortfolio\\my-portfolio-client\\app\\api\\tools\\route.ts",nextConfigOutput:"",userland:s}),{workAsyncStorage:y,workUnitAsyncStorage:w,serverHooks:v}=x;function A(){return(0,a.patchFetch)({workAsyncStorage:y,workUnitAsyncStorage:w})}},44870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},55511:e=>{"use strict";e.exports=require("crypto")},55591:e=>{"use strict";e.exports=require("https")},56037:e=>{"use strict";e.exports=require("mongoose")},61275:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});var s=r(56037);let o=new s.Schema({name:{type:String,required:!0},icon:{type:String},description:{type:String},category:{type:String}},{timestamps:!0}),n=s.models.Tool||(0,s.model)("Tool",o)},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},78335:()=>{},79551:e=>{"use strict";e.exports=require("url")},81630:e=>{"use strict";e.exports=require("http")},96487:()=>{}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[447,580,870],()=>r(38539));module.exports=s})();