(()=>{var e={};e.id=214,e.ids=[214],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},7462:(e,t,r)=>{"use strict";r.d(t,{A:()=>i});var s=r(56037),o=r.n(s);let a=process.env.MONGODB_URI;if(!a)throw Error("Please define the MONGODB_URI environment variable inside .env.local");let n=global.mongoose;n||(n=global.mongoose={conn:null,promise:null});let i=async function(){return n.conn||(n.promise||(n.promise=o().connect(a,{bufferCommands:!1}).then(e=>e)),n.conn=await n.promise),n.conn}},9757:(e,t,r)=>{"use strict";r.r(t),r.d(t,{patchFetch:()=>A,routeModule:()=>x,serverHooks:()=>v,workAsyncStorage:()=>w,workUnitAsyncStorage:()=>y});var s={};r.r(s),r.d(s,{DELETE:()=>g,GET:()=>d,POST:()=>m,PUT:()=>f,runtime:()=>c});var o=r(96559),a=r(48088),n=r(37719),i=r(32190),u=r(7462),p=r(11866),l=r(16804);let c="nodejs";async function d(){await (0,u.A)();let e=await p.A.find();return i.NextResponse.json(e)}async function m(e){if(await (0,u.A)(),!(e.headers.get("content-type")||"").startsWith("multipart/form-data"))return i.NextResponse.json({message:"Invalid content type"},{status:400});let t=await e.formData(),r=t.get("platform"),s=t.get("url"),o=t.get("icon");if(!r||!s||!o||"string"==typeof o)return i.NextResponse.json({message:"All fields including icon are required"},{status:400});let a=await o.arrayBuffer(),n=Buffer.from(a),c=await new Promise((e,t)=>{l.A.uploader.upload_stream({folder:"socials",resource_type:"image",allowed_formats:["jpg","jpeg","png","webp"]},(r,s)=>{r?t(r):e(s)}).end(n)}),d=await p.A.create({platform:String(r),url:String(s),icon:c.secure_url});return i.NextResponse.json(d,{status:201})}async function f(e){if(await (0,u.A)(),!(e.headers.get("content-type")||"").startsWith("multipart/form-data"))return i.NextResponse.json({message:"Invalid content type"},{status:400});let t=await e.formData(),r=t.get("id"),s=t.get("platform"),o=t.get("url"),a=t.get("icon");if(!r)return i.NextResponse.json({message:"ID is required"},{status:400});let n=await p.A.findById(r);if(!n)return i.NextResponse.json({message:"Social not found"},{status:404});if(s&&(n.platform=String(s)),o&&(n.url=String(o)),a&&"string"!=typeof a){let e=await a.arrayBuffer(),t=Buffer.from(e);n.icon=(await new Promise((e,r)=>{l.A.uploader.upload_stream({folder:"socials",resource_type:"image",allowed_formats:["jpg","jpeg","png","webp"]},(t,s)=>{t?r(t):e(s)}).end(t)})).secure_url}let c=await n.save();return i.NextResponse.json(c)}async function g(e){await (0,u.A)();let{id:t}=await e.json();return await p.A.findByIdAndDelete(t)?i.NextResponse.json({message:"Social deleted successfully"}):i.NextResponse.json({message:"Social not found"},{status:404})}let x=new o.AppRouteRouteModule({definition:{kind:a.RouteKind.APP_ROUTE,page:"/api/socials/route",pathname:"/api/socials",filename:"route",bundlePath:"app/api/socials/route"},resolvedPagePath:"C:\\Users\\stephanie\\Documents\\B550 MCP MERN\\WebPortfolio\\my-portfolio-client\\app\\api\\socials\\route.ts",nextConfigOutput:"",userland:s}),{workAsyncStorage:w,workUnitAsyncStorage:y,serverHooks:v}=x;function A(){return(0,n.patchFetch)({workAsyncStorage:w,workUnitAsyncStorage:y})}},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},11723:e=>{"use strict";e.exports=require("querystring")},11866:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});var s=r(56037);let o=new s.Schema({platform:{type:String,required:!0},url:{type:String,required:!0},icon:{type:String}},{timestamps:!0}),a=s.models.Social||(0,s.model)("Social",o)},16804:(e,t,r)=>{"use strict";r.d(t,{A:()=>o});var s=r(71870);s.v2.config({cloud_name:process.env.CLOUDINARY_CLOUD_NAME,api_key:process.env.CLOUDINARY_API_KEY,api_secret:process.env.CLOUDINARY_API_SECRET});let o=s.v2},27910:e=>{"use strict";e.exports=require("stream")},29021:e=>{"use strict";e.exports=require("fs")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},44870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},55511:e=>{"use strict";e.exports=require("crypto")},55591:e=>{"use strict";e.exports=require("https")},56037:e=>{"use strict";e.exports=require("mongoose")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},78335:()=>{},79551:e=>{"use strict";e.exports=require("url")},81630:e=>{"use strict";e.exports=require("http")},96487:()=>{}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[447,580,870],()=>r(9757));module.exports=s})();