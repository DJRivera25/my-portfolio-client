(()=>{var e={};e.id=64,e.ids=[64],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},7462:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});var s=r(56037),n=r.n(s);let o=process.env.MONGODB_URI;if(!o)throw Error("Please define the MONGODB_URI environment variable inside .env.local");let i=global.mongoose;i||(i=global.mongoose={conn:null,promise:null});let a=async function(){return i.conn||(i.promise||(i.promise=n().connect(o,{bufferCommands:!1}).then(e=>e)),i.conn=await i.promise),i.conn}},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},11723:e=>{"use strict";e.exports=require("querystring")},16804:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});var s=r(71870);s.v2.config({cloud_name:process.env.CLOUDINARY_CLOUD_NAME,api_key:process.env.CLOUDINARY_API_KEY,api_secret:process.env.CLOUDINARY_API_SECRET});let n=s.v2},27910:e=>{"use strict";e.exports=require("stream")},29021:e=>{"use strict";e.exports=require("fs")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},35149:(e,t,r)=>{"use strict";r.r(t),r.d(t,{patchFetch:()=>w,routeModule:()=>x,serverHooks:()=>v,workAsyncStorage:()=>j,workUnitAsyncStorage:()=>y});var s={};r.r(s),r.d(s,{DELETE:()=>g,GET:()=>l,POST:()=>m,PUT:()=>f,runtime:()=>d});var n=r(96559),o=r(48088),i=r(37719),a=r(32190),u=r(7462),p=r(66672),c=r(16804);let d="nodejs";async function l(){await (0,u.A)();let e=await p.A.find();return a.NextResponse.json(e)}async function m(e){if(await (0,u.A)(),!(e.headers.get("content-type")||"").startsWith("multipart/form-data"))return a.NextResponse.json({message:"Invalid content type"},{status:400});let t=await e.formData(),r=t.get("image"),s=t.get("title"),n=t.get("description"),o=t.get("link");if(!r||!s||!n||!o)return a.NextResponse.json({message:"All fields including image are required"},{status:400});let i=await r.arrayBuffer(),d=Buffer.from(i),l=await new Promise((e,t)=>{c.A.uploader.upload_stream({folder:"portfolio",resource_type:"image",transformation:[{width:800,crop:"limit"}]},(r,s)=>{r?t(r):e(s)}).end(d)}),m=await p.A.create({title:String(s),description:String(n),link:String(o),image:l.secure_url});return a.NextResponse.json(m,{status:201})}async function f(e){await (0,u.A)();let{id:t,...r}=await e.json(),s=await p.A.findByIdAndUpdate(t,r,{new:!0});return s?a.NextResponse.json(s):a.NextResponse.json({message:"Project not found"},{status:404})}async function g(e){await (0,u.A)();let{id:t}=await e.json();return await p.A.findByIdAndDelete(t)?a.NextResponse.json({message:"Project deleted successfully"}):a.NextResponse.json({message:"Project not found"},{status:404})}let x=new n.AppRouteRouteModule({definition:{kind:o.RouteKind.APP_ROUTE,page:"/api/projects/route",pathname:"/api/projects",filename:"route",bundlePath:"app/api/projects/route"},resolvedPagePath:"C:\\Users\\stephanie\\Documents\\B550 MCP MERN\\WebPortfolio\\my-portfolio-client\\app\\api\\projects\\route.ts",nextConfigOutput:"",userland:s}),{workAsyncStorage:j,workUnitAsyncStorage:y,serverHooks:v}=x;function w(){return(0,i.patchFetch)({workAsyncStorage:j,workUnitAsyncStorage:y})}},44870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},55511:e=>{"use strict";e.exports=require("crypto")},55591:e=>{"use strict";e.exports=require("https")},56037:e=>{"use strict";e.exports=require("mongoose")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},66672:(e,t,r)=>{"use strict";r.d(t,{A:()=>o});var s=r(56037);let n=new s.Schema({title:{type:String,required:!0},description:{type:String,required:!0},image:{type:String,required:!0},link:{type:String,required:!0},featured:{type:Boolean,default:!1}},{timestamps:!0}),o=s.models.Project||(0,s.model)("Project",n)},78335:()=>{},79551:e=>{"use strict";e.exports=require("url")},81630:e=>{"use strict";e.exports=require("http")},96487:()=>{}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[447,580,870],()=>r(35149));module.exports=s})();