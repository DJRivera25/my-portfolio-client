(()=>{var e={};e.id=514,e.ids=[514],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},7462:(e,t,r)=>{"use strict";r.d(t,{A:()=>i});var s=r(56037),n=r.n(s);let a=process.env.MONGODB_URI;if(!a)throw Error("Please define the MONGODB_URI environment variable inside .env.local");let o=global.mongoose;o||(o=global.mongoose={conn:null,promise:null});let i=async function(){return o.conn||(o.promise||(o.promise=n().connect(a,{bufferCommands:!1}).then(e=>e)),o.conn=await o.promise),o.conn}},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},11723:e=>{"use strict";e.exports=require("querystring")},16804:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});var s=r(71870);s.v2.config({cloud_name:process.env.CLOUDINARY_CLOUD_NAME,api_key:process.env.CLOUDINARY_API_KEY,api_secret:process.env.CLOUDINARY_API_SECRET});let n=s.v2},27910:e=>{"use strict";e.exports=require("stream")},29021:e=>{"use strict";e.exports=require("fs")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},44870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},55511:e=>{"use strict";e.exports=require("crypto")},55591:e=>{"use strict";e.exports=require("https")},56037:e=>{"use strict";e.exports=require("mongoose")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},66672:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});var s=r(56037);let n=new s.Schema({title:{type:String,required:!0},description:{type:String,required:!0},image:{type:String,required:!0},link:{type:String,required:!0},featured:{type:Boolean,default:!1}},{timestamps:!0}),a=s.models.Project||(0,s.model)("Project",n)},78335:()=>{},79551:e=>{"use strict";e.exports=require("url")},81630:e=>{"use strict";e.exports=require("http")},96487:()=>{},99420:(e,t,r)=>{"use strict";r.r(t),r.d(t,{patchFetch:()=>v,routeModule:()=>x,serverHooks:()=>w,workAsyncStorage:()=>y,workUnitAsyncStorage:()=>j});var s={};r.r(s),r.d(s,{DELETE:()=>f,GET:()=>l,PATCH:()=>g,PUT:()=>m,runtime:()=>d});var n=r(96559),a=r(48088),o=r(37719),i=r(32190),u=r(7462),p=r(66672),c=r(16804);let d="nodejs";async function l(e,t){let r=await t.params;await (0,u.A)();try{let e=await p.A.findById(r.id);if(!e)return i.NextResponse.json({message:"Project not found"},{status:404});return i.NextResponse.json(e)}catch(e){return i.NextResponse.json({message:e.message},{status:500})}}async function m(e,t){let r=await t.params;await (0,u.A)();try{if(!(e.headers.get("content-type")||"").startsWith("multipart/form-data"))return i.NextResponse.json({message:"Invalid content type"},{status:400});let t=await e.formData(),s=t.get("title"),n=t.get("description"),a=t.get("link"),o=t.get("image"),u=await p.A.findById(r.id);if(!u)return i.NextResponse.json({message:"Project not found"},{status:404});if(s&&(u.title=String(s)),n&&(u.description=String(n)),a&&(u.link=String(a)),o){let e=await o.arrayBuffer(),t=Buffer.from(e);u.image=(await new Promise((e,r)=>{c.A.uploader.upload_stream({folder:"portfolio",resource_type:"image",transformation:[{width:800,crop:"limit"}]},(t,s)=>{t?r(t):e(s)}).end(t)})).secure_url}let d=await u.save();return i.NextResponse.json(d)}catch(e){return i.NextResponse.json({message:e.message},{status:500})}}async function f(e,t){let r=await t.params;await (0,u.A)();try{if(!await p.A.findByIdAndDelete(r.id))return i.NextResponse.json({message:"Project not found"},{status:404});return i.NextResponse.json({message:"Project deleted"})}catch(e){return i.NextResponse.json({message:e.message},{status:500})}}async function g(e,t){let r=await t.params;await (0,u.A)();try{await p.A.updateMany({},{$set:{featured:!1}});let e=await p.A.findByIdAndUpdate(r.id,{featured:!0},{new:!0});if(!e)return i.NextResponse.json({message:"Project not found"},{status:404});return i.NextResponse.json(e)}catch(e){return i.NextResponse.json({message:e.message},{status:500})}}let x=new n.AppRouteRouteModule({definition:{kind:a.RouteKind.APP_ROUTE,page:"/api/projects/[id]/route",pathname:"/api/projects/[id]",filename:"route",bundlePath:"app/api/projects/[id]/route"},resolvedPagePath:"C:\\Users\\stephanie\\Documents\\B550 MCP MERN\\WebPortfolio\\my-portfolio-client\\app\\api\\projects\\[id]\\route.ts",nextConfigOutput:"",userland:s}),{workAsyncStorage:y,workUnitAsyncStorage:j,serverHooks:w}=x;function v(){return(0,o.patchFetch)({workAsyncStorage:y,workUnitAsyncStorage:j})}}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[447,580,870],()=>r(99420));module.exports=s})();